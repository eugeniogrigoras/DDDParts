CREATE TABLE CATEGORIE_PRIMARIE (
    ID INT NOT NULL AUTO_INCREMENT,
    NOME VARCHAR(30),
    PRIMARY KEY (ID) 
);

CREATE TABLE TAG (
	ID INT NOT NULL AUTO_INCREMENT,
	NOME VARCHAR(20),
	PRIMARY KEY (ID)
);

CREATE TABLE UTENTI (
	ID INT NOT NULL AUTO_INCREMENT,
	COGNOME VARCHAR(30),
	COGNOME VARCHAR(30),
	EMAIL VARCHAR(30),
	DESCRIZIONE VARCHAR(300),
	PASSWORD VARCHAR(30),
	IMMAGINE_PROFILO VARCHAR(100),
	CODICE_CONFERMA VARCHAR(10),
	ACCETTATO BOOL,
	FK_COMUNE INT,
	PRIMARY KEY (ID),
	FOREIGN KEY (FK_COMUNE) REFERENCES comuni (id)
);

CREATE TABLE CATEGORIE_SECONDARIE (
    ID INT NOT NULL AUTO_INCREMENT,
    NOME VARCHAR(30),
    FK_CATEGORIA_PRIMARIA INT,
    PRIMARY KEY (ID),
    FOREIGN KEY (FK_CATEGORIA_PRIMARIA) REFERENCES CATEGORIE_PRIMARIE (ID)   
);

CREATE TABLE PROGETTI (
    ID INT NOT NULL AUTO_INCREMENT,
    NOME VARCHAR(30),
    LINK VARCHAR(100),
    DESCRIZIONE VARCHAR(300),
    FK_UTENTE INT,
    FK_CATEGORIA_SECONDARIA INT,
    PRIMARY KEY (ID),
    FOREIGN KEY (FK_UTENTE) REFERENCES UTENTI (ID),
    FOREIGN KEY (FK_CATEGORIA_SECONDARIA) REFERENCES CATEGORIE_SECONDARIE (ID)   
);

CREATE TABLE COLLEZIONI (
    ID INT NOT NULL AUTO_INCREMENT,
    TITOLO  VARCHAR(30),
    DATA_UPDATE  DATE,
    FK_UTENTE INT,
    PRIMARY KEY (ID),
    FOREIGN KEY (FK_UTENTE) REFERENCES UTENTI (ID)
);

CREATE TABLE COLLEZIONI_COMPOSTE_DA_PROGETTI (
    ID INT NOT NULL AUTO_INCREMENT,
    FK_COLLEZIONE INT,
    FK_PROGETTO INT,
    PRIMARY KEY (ID),
    FOREIGN KEY (FK_COLLEZIONE) REFERENCES COLLEZIONI (ID),
    FOREIGN KEY (FK_PROGETTO) REFERENCES PROGETTI (ID)
);

CREATE TABLE UTENTI_SEGUONO_UTENTI (
	ID INT NOT NULL AUTO_INCREMENT,
	FK_UTENTE INT,
	FK_UTENTE_SEGUITO INT,
	PRIMARY KEY (ID),
	FOREIGN KEY (FK_UTENTE) REFERENCES UTENTI (ID),
	FOREIGN KEY (FK_UTENTE_SEGUITO) REFERENCES UTENTI (ID)
);

CREATE TABLE UTENTI_SEGUONO_COLLEZIONI (
	ID INT NOT NULL AUTO_INCREMENT,
	FK_COLLEZIONE INT,
	FK_UTENTE INT,
	PRIMARY KEY (ID),
	FOREIGN KEY (FK_UTENTE) REFERENCES UTENTI (ID),
	FOREIGN KEY (FK_COLLEZIONE) REFERENCES COLLEZIONI (ID)
);

CREATE TABLE UTENTI_LIKE_COLELZIONI (
	ID INT NOT NULL AUTO_INCREMENT,
	FK_UTENTE INT,
	FK_COLLEZIONE INT,
	PRIMARY KEY (ID),
	FOREIGN KEY (FK_UTENTE) REFERENCES UTENTI (ID),
	FOREIGN KEY (FK_COLLEZIONE) REFERENCES COLLEZIONI (ID)
);

CREATE TABLE UTENTI_LIKE_PROGETTI (
	ID INT NOT NULL AUTO_INCREMENT,
	FK_UTENTE INT,
	FK_PROGETTO INT,
	PRIMARY KEY (ID),
	FOREIGN KEY (FK_UTENTE) REFERENCES UTENTI (ID),
	FOREIGN KEY (FK_PROGETTO) REFERENCES PROGETTI (ID)
);

CREATE TABLE UTENTI_COMMENTANO_PROGETTI (
	ID INT NOT NULL AUTO_INCREMENT,
	FK_UTENTE INT,
	FK_PROGETTO INT,
	DATA DATETIME,
	PRIMARY KEY (ID),
	FOREIGN KEY (FK_UTENTE) REFERENCES UTENTI (ID),
	FOREIGN KEY (FK_PROGETTO) REFERENCES PROGETTI (ID)
);

CREATE TABLE PARTI_3D (
	ID INT NOT NULL AUTO_INCREMENT,
	NOME VARCHAR(30),
	LINK VARCHAR(100),
	FK_PROGETTO INT,
	DESCRIZIONE VARCHAR(300),
	PRIMARY KEY (ID),
	FOREIGN KEY (FK_PROGETTO) REFERENCES PROGETTI (ID)
);

CREATE TABLE IMMAGINI (
	ID INT NOT NULL AUTO_INCREMENT,
	NOME VARCHAR(30),
	FK_PROGETTO INT,
	DESCRIZIONE VARCHAR(300),
	PRIMARY KEY (ID),
	FOREIGN KEY (FK_PROGETTO) REFERENCES PROGETTI (ID)
);

CREATE TABLE PROGETTI_HANNO_TAG (
	ID INT NOT NULL AUTO_INCREMENT,
	FK_PROGETTO INT,
	FK_TAG INT,
	PRIMARY KEY (ID),
	FOREIGN KEY (FK_PROGETTO) REFERENCES PROGETTI (ID),
	FOREIGN KEY (FK_TAG) REFERENCES TAG (ID)
);

